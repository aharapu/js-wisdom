<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="/config.js"></script>
    <script
      type="module"
      src="/examples/post-message/post-message.js"
      defer
    ></script>
  </head>
  <body>
    <h1>post messages</h1>
    <section id="section-messages"></section>
    <hr />
    <h3>code samples</h3>
    <div id="code-samples"></div>
    <hr />
    <h4>reference reading</h4>
    <ul>
      <li>
        https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage
      </li>
      <li>https://developer.mozilla.org/en-US/docs/Web/API/Window/open</li>
      <li>https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types</li>
      <li>
        https://bluepnume.medium.com/every-known-way-to-get-references-to-windows-in-javascript-223778bede2d
      </li>
    </ul>
    <hr />
    <h4>lessons learned</h4>
    <ol>
      <li>
        <p>
          postMessage takes a second argument which is the target's url. a
          <span style="background: lightgrey">*</span> can be used as a wildcard
          but that is not recommended since your data is exposed to any site
          that decides to be the opener and link to your page. it will work
          without the second argument only if on the same domain.
        </p>
      </li>
      <li>
        <p>
          Setting target="_blank" on anchor elements implicitly provides the
          same rel behavior as setting rel="noopener" which does not set
          window.opener when using the anchor tag, a rel="opener" must be
          provided, otherwise the opened window will not have its window.opener
          be null
        </p>
      </li>
      <li>
        <p>
          to be able to use the window object of an iframe, the iframe needs to
          be ready first to do this we can leverage the iframes load event
        </p>
      </li>
    </ol>
  </body>
</html>
